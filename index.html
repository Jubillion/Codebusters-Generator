<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codebusters Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Codebusters Generator</h1>
            <p>Get random quotes and encode them with SciOly Codebusters ciphers</p>
        </header>

        <main>
            <div class="controls">
                <label for="cipher-select">Choose Cipher:</label>
                <select id="cipher-select">
                    <option value="k1">K1 - Mixed Plaintext</option>
                    <option value="k2">K2 - Mixed Ciphertext</option>
                    <option value="k3">K3 - Mixed Both Same Key</option>
                    <!-- K4 LEGACY CODE: Included for reference only - DO NOT MODIFY OR UNCOMMENT -->
                    <!--<option value="k4">K4 - Mixed Both Different Keys</option>-->
                    <option value="random">Random Alphabet</option>
                    <option value="porta">Porta Cipher</option>
                    <option value="nihilist">Nihilist Cipher</option>
                </select>
                
                <div class="api-key-section">
                    <label class="api-key-toggle-label">
                        <input type="checkbox" id="api-key-toggle">
                        Use API Key (unlimited requests)
                    </label>
                    
                    <div id="api-key-container" class="api-key-container" style="display: none;">
                        <label for="api-key-input">ZenQuotes API Key:</label>
                        <input type="password" id="api-key-input" placeholder="Enter your ZenQuotes API key">
                        <div id="api-key-status" class="api-key-status"></div>
                        <div class="api-key-help">
                            Get your API key at <a href="https://zenquotes.io/" target="_blank">zenquotes.io</a>
                        </div>
                    </div>
                </div>
                
                <button id="get-quote-btn">Get Random Quote</button>
                <button id="print-reference-btn">Print Reference Sheet</button>
            </div>

            <!-- K4 Competition Notice -->
            <div id="k4-notice" class="notice-card notice-warning" style="display: none;">
                <div class="notice-content">
                    <strong>Competition Notice:</strong> K4 substitutions are not used in Science Olympiad Codebusters competitions as of
                    the 2025-2026 season. Also note that the alphabets for K4 are not generated using the official ACA specifications.
                </div>
            </div>

            <div class="quote-section">
                <div class="cipher-box full-width">
                    <h3>Encoded Quote:</h3>
                    <div id="encoded-quote" class="quote-text">Select a cipher and get a quote to see the encoded text</div>
                    <div class="cipher-info">
                        <span id="cipher-info">Select a cipher and get a quote</span>
                    </div>
                    <div class="reveal-section">
                        <button id="reveal-quote-btn" class="reveal-btn" style="display: none;">Reveal Original Quote</button>
                        <button id="reveal-keyword-btn" class="reveal-btn" style="display: none;">Reveal Keyword(s)</button>
                        <button id="reveal-alphabet-btn" class="reveal-btn" style="display: none;">Reveal Alphabet Table</button>
                        <button id="print-cipher-btn" class="reveal-btn" style="display: none;">Print Cipher Worksheet</button>
                    </div>
                    
                    <div id="revealed-quote-content" class="revealed-content" style="display: none;">
                        <div id="revealed-quote" class="revealed-quote"></div>
                    </div>
                    
                    <div id="revealed-keyword-content" class="revealed-content" style="display: none;">
                        <div id="revealed-keywords" class="revealed-keywords"></div>
                    </div>
                    
                    <div id="revealed-alphabet-content" class="revealed-content" style="display: none;">
                        <div id="revealed-alphabet" class="revealed-alphabet"></div>
                    </div>
                </div>
                
                <!-- Porta-specific options -->
                <div id="porta-options" class="porta-options" style="display: none;">
                    <label class="hide-keyword-label">
                        <input type="checkbox" id="hide-keyword-toggle">
                        Hide keyword when printing worksheet
                    </label>
                </div>
            </div>

            <div class="loading" id="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Fetching quote...</p>
            </div>
            
            <div class="attribution">
                <p>Inspirational quotes provided by <a href="https://zenquotes.io/" target="_blank">ZenQuotes API</a></p>
            </div>
        </main>

        <!-- Print-only content -->
        <div id="print-content" class="print-only" style="display: none;">
            <div class="print-header">
                <h1 id="print-title">Cipher Worksheet</h1>
                <div id="print-cipher-info" class="cipher-info"></div>
                <div id="print-info" class="print-info"></div>
            </div>
            
            <div class="section-header">Decode the Message:</div>
            <div id="print-cipher-text-table"></div>
            
            <div id="substitution-chart-header" class="section-header">Letter Substitution Chart:</div>
            <div id="print-substitution-table"></div>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>
